name: Deploy to Infomaniak

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Deploy via SFTP
        uses: wangyucode/sftp-upload-action@v2.0.4
        with:
          host: 57-107596.ssh.hosting-ik.com
          username: j6tLfqHN8K4_deploy
          password: ${{ secrets.INFOMANIAKLOGIN }}
          localDir: .
          remoteDir: /srv/customer/sites/yossi.eu/
          exclude: .git/**,.git,node_modules/**,node_modules,.github/**,.github
